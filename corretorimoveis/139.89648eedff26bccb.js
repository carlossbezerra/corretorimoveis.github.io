"use strict";(self.webpackChunkcorretorimoveis=self.webpackChunkcorretorimoveis||[]).push([[139],{8139:(V,v,r)=>{r.r(v),r.d(v,{ImoveisModule:()=>W});var a=r(6895),m=r(1410),t=r(8256),Z=r(9718),F=r(262),T=r(9646),_=r(2843),u=r(2340),d=r(529),y=r(5024);const p=u.N.apiURL;let f=(()=>{class e{constructor(o,n){this.http=o,this.tokenService=n}listaDoUsuario(o){return this.http.get(`${p}/${o}/photos`)}buscarPorId(o){return this.http.get(`${p}/photos/${o}`)}excluiImovel(o){return this.http.delete(`${p}/photos/${o}`)}curtir(o){return this.http.post(`${p}/photos/${o}/like`,{},{observe:"response"}).pipe((0,Z.h)(!0),(0,F.K)(n=>"304"===n.status?(0,T.of)(!1):(0,_._)(n)))}upload(o,n,s){const l=new FormData;return l.append("description",o),l.append("allowComments",n?"true":"false"),l.append("imageFile",s),this.http.post(`${p}/photos/uploade`,l,{observe:"events",reportProgress:!0})}}return e.\u0275fac=function(o){return new(o||e)(t.LFG(d.eN),t.LFG(y.B))},e.\u0275prov=t.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();const A=u.N.apiURL;let h=(()=>{class e{constructor(){this.urlOriginal="",this.descricao=""}set url(o){this.urlOriginal=o.startsWith("data")?o:`${A}/imgs/${o}`}get url(){return this.urlOriginal}ngOnInit(){}}return e.\u0275fac=function(o){return new(o||e)},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-imovel"]],inputs:{descricao:"descricao",url:"url"},decls:1,vars:2,consts:[[1,"img-thumbnail",3,"src","alt"]],template:function(o,n){1&o&&t._UZ(0,"img",0),2&o&&t.Q6J("src",n.url,t.LSH)("alt",n.descricao)}}),e})();var c=r(433),g=r(3900),U=r(8505);const I=u.N.apiURL;let S=(()=>{class e{constructor(o){this.http=o}buscaComentario(o){return this.http.get(`${I}/photos/${o}/comments`)}incluiComentario(o,n){return this.http.post(`${I}/photos/${o}/comments`,{commentText:n})}}return e.\u0275fac=function(o){return new(o||e)(t.LFG(d.eN))},e.\u0275prov=t.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();var J=r(6341);function L(e,i){if(1&e&&(t.TgZ(0,"li")(1,"p",10),t._uU(2),t.qZA(),t.TgZ(3,"em"),t._uU(4),t.ALo(5,"date"),t.qZA(),t.TgZ(6,"p",11),t._uU(7),t.qZA()()),2&e){const o=i.$implicit;t.xp6(2),t.Oqu(o.userName),t.xp6(2),t.Oqu(t.xi3(5,3,o.date,"dd-MM-yyyy HH:mm")),t.xp6(3),t.Oqu(o.text)}}function $(e,i){1&e&&t._UZ(0,"app-mensagem",12)}function N(e,i){if(1&e){const o=t.EpF();t.TgZ(0,"div")(1,"ul",1),t.YNc(2,L,8,6,"li",2),t.qZA(),t.TgZ(3,"div",3)(4,"form",4),t.NdJ("submit",function(){t.CHM(o);const s=t.oxw();return t.KtG(s.gravar())}),t.TgZ(5,"div",5),t._UZ(6,"textarea",6),t.TgZ(7,"div",7)(8,"button",8),t._uU(9," Publicar "),t.qZA()()(),t.YNc(10,$,1,0,"app-mensagem",9),t.qZA()()()}if(2&e){const o=i.ngIf,n=t.oxw();let s;t.xp6(2),t.Q6J("ngForOf",o),t.xp6(6),t.Q6J("disabled",n.comentarioForm.invalid),t.xp6(2),t.Q6J("ngIf",!(null==(s=n.comentarioForm.get("comentario"))||null==s.errors||!s.errors[n.maxLength]))}}let b=(()=>{class e{constructor(o,n){this.comentariosService=o,this.formBuilder=n}ngOnInit(){this.comentarios$=this.comentariosService.buscaComentario(this.id),this.comentarioForm=this.formBuilder.group({comentario:["",c.kI.maxLength(300)]})}gravar(){const o=this.comentarioForm.get("comentario")?.value??"";this.comentarios$=this.comentariosService.incluiComentario(this.id,o).pipe((0,g.w)(()=>this.comentariosService.buscaComentario(this.id)),(0,U.b)(()=>{this.comentarioForm.reset(),alert("Salvo Coment\xe1rio")}))}}return e.\u0275fac=function(o){return new(o||e)(t.Y36(S),t.Y36(c.qu))},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-comentarios"]],inputs:{id:"id"},decls:2,vars:3,consts:[[4,"ngIf"],[1,"list-unstyled","comentario-list"],[4,"ngFor","ngForOf"],[1,"mt-4"],["{[formGroup]","comentarioForm",3,"submit"],[1,"input-group"],["formControlName","comentario",1,"form-control"],[1,"input-group-apped"],[1,"btn","btn-primary","pull-left",3,"disabled"],["mensagem","Tamanho m\xe1ximo de 300 caracteres",4,"ngIf"],[1,"text-dark","font-weight-bold","mr-1"],["Class","break-word mb-2"],["mensagem","Tamanho m\xe1ximo de 300 caracteres"]],template:function(o,n){1&o&&(t.YNc(0,N,11,3,"div",0),t.ALo(1,"async")),2&o&&t.Q6J("ngIf",t.lcZ(1,1,n.comentarios$))},dependencies:[a.sg,a.O5,J.c,c._Y,c.Fj,c.JJ,c.JL,c.u,a.Ov,a.uU],styles:[".comentario-list[_ngcontent-%COMP%]{height:50vh;overflow:auto}"]}),e})();function M(e,i){if(1&e&&t._UZ(0,"app-comentarios",12),2&e){const o=t.oxw(2);t.Q6J("id",o.imovelId)}}function Y(e,i){1&e&&(t.TgZ(0,"p"),t._uU(1,"Usu\xe1rio n\xe3o pode comentar o imovel"),t.qZA())}function w(e,i){if(1&e){const o=t.EpF();t.TgZ(0,"div",1)(1,"div",2)(2,"div",3),t._UZ(3,"app-imovel",4),t.qZA(),t.TgZ(4,"div",5)(5,"small")(6,"p",6),t._uU(7),t.qZA(),t.TgZ(8,"i",7),t.NdJ("click",function(){t.CHM(o);const s=t.oxw();return t.KtG(s.curtir())}),t._uU(9),t.qZA(),t.TgZ(10,"i",8),t._uU(11),t.qZA(),t.TgZ(12,"i",9),t.NdJ("click",function(){t.CHM(o);const s=t.oxw();return t.KtG(s.excluir())}),t.qZA()(),t.YNc(13,M,1,1,"app-comentarios",10),t.YNc(14,Y,2,0,"ng-template",null,11,t.W1O),t.qZA()()()}if(2&e){const o=i.ngIf,n=t.MAs(15);t.xp6(3),t.Q6J("url",o.url)("descricao",o.description),t.xp6(4),t.Oqu(o.description),t.xp6(2),t.Oqu(o.likes),t.xp6(2),t.Oqu(o.comments),t.xp6(2),t.Q6J("ngIf",o.allowComments)("ngIfElse",n)}}let D=(()=>{class e{constructor(o,n,s){this.imoveisService=o,this.activatedRouter=n,this.router=s}ngOnInit(){this.imovelId=this.activatedRouter.snapshot.params.imovelid,this.imovel$=this.imoveisService.buscarPorId(this.imovelId)}curtir(){this.imoveisService.curtir(this.imovelId).subscribe(o=>{o&&(this.imovel$=this.imoveisService.buscarPorId(this.imovelId))})}excluir(){this.imoveisService.excluiImovel(this.imovelId).subscribe(()=>{this.router.navigate(["/imoveis/"])},o=>console.log(o))}}return e.\u0275fac=function(o){return new(o||e)(t.Y36(f),t.Y36(m.gz),t.Y36(m.F0))},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-detalhe-imovel"]],decls:2,vars:3,consts:[["class","bg-white border",4,"ngIf"],[1,"bg-white","border"],[1,"row"],[1,"col-lg-8"],[3,"url","descricao"],[1,"col-lg-4"],[1,"text-left","break-word"],[1,"fa","fa-heart-o","fa-2x","mr","pull-left",3,"click"],[1,"fa","fa-comment-o","fa-2x","mr-2","ml-2"],[1,"fa","fa-trash-o","fa-2x","pull-right",3,"click"],[3,"id",4,"ngIf","ngIfElse"],["warning",""],[3,"id"]],template:function(o,n){1&o&&(t.YNc(0,w,16,7,"div",0),t.ALo(1,"async")),2&o&&t.Q6J("ngIf",t.lcZ(1,1,n.imovel$))},dependencies:[a.O5,h,b,a.Ov]}),e})();function G(e,i){if(1&e&&(t.TgZ(0,"h4",3),t._uU(1),t.qZA()),2&e){const o=t.oxw();t.xp6(1),t.Oqu(o.titulo)}}const Q=["*"];let R=(()=>{class e{constructor(){this.titulo=""}ngOnInit(){}}return e.\u0275fac=function(o){return new(o||e)},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-cartao"]],inputs:{titulo:"titulo"},ngContentSelectors:Q,decls:4,vars:1,consts:[[1,"card","border-light","text-center"],["class","card-header",4,"ngIf"],[1,"card-block","text-justify"],[1,"card-header"]],template:function(o,n){1&o&&(t.F$t(),t.TgZ(0,"div",0),t.YNc(1,G,2,1,"h4",1),t._UZ(2,"div",2),t.Hsn(3),t.qZA()),2&o&&(t.xp6(1),t.Q6J("ngIf",n.titulo))},dependencies:[a.O5]}),e})();function q(e,i){1&e&&(t.TgZ(0,"p",3),t._uU(1," Desculpe n\xe3o h\xe1 imoveis\n"),t.qZA())}const E=function(e){return["/imoveis",e]};function z(e,i){if(1&e&&(t.TgZ(0,"div",4)(1,"a",5)(2,"app-cartao"),t._UZ(3,"app-imovel",6),t.TgZ(4,"i",7),t._uU(5),t.qZA(),t.TgZ(6,"i",8),t._uU(7),t.qZA()()()()),2&e){const o=i.$implicit;t.xp6(1),t.Q6J("routerLink",t.VKq(5,E,o.id)),t.xp6(2),t.Q6J("url",o.url)("descricao",o.description),t.xp6(2),t.Oqu(o.likes),t.xp6(2),t.Oqu(o.comments)}}let P=(()=>{class e{constructor(){}ngOnInit(){}}return e.\u0275fac=function(o){return new(o||e)},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-grade-fotos-imoveis"]],inputs:{imoveis:"imoveis"},decls:3,vars:2,consts:[["class","text-center text-muted",4,"ngIf"],[1,"row"],["class","col-4",4,"ngFor","ngForOf"],[1,"text-center","text-muted"],[1,"col-4"],[3,"routerLink"],[3,"url","descricao"],["aria-hidden","true",1,"fa","fa-heart-o","fa","1x","mr-2"],["aria-hidden","true",1,"fa","fa-comment-o","fa-1x","mr-2","ml2"]],template:function(o,n){1&o&&(t.YNc(0,q,2,0,"p",0),t.TgZ(1,"div",1),t.YNc(2,z,8,7,"div",2),t.qZA()),2&o&&(t.Q6J("ngIf",!n.imoveis.length),t.xp6(2),t.Q6J("ngForOf",n.imoveis))},dependencies:[a.sg,a.O5,m.yS,R,h]}),e})(),C=(()=>{class e{constructor(o){this.activatedRoute=o}ngOnInit(){this.activatedRoute.params.subscribe(o=>{this.imoveis=this.activatedRoute.snapshot.data.imoveis})}}return e.\u0275fac=function(o){return new(o||e)(t.Y36(m.gz))},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-lista-imoveis"]],decls:1,vars:1,consts:[[3,"imoveis"]],template:function(o,n){1&o&&t._UZ(0,"app-grade-fotos-imoveis",0),2&o&&t.Q6J("imoveis",n.imoveis)},dependencies:[P]}),e})();var k=r(5698),B=r(620);let x=(()=>{class e{constructor(o,n){this.imoveisService=o,this.usuarioService=n}resolve(o,n){return this.usuarioService.retornaUsuario().pipe((0,g.w)(s=>this.imoveisService.listaDoUsuario(s.name??"")),(0,k.q)(1))}}return e.\u0275fac=function(o){return new(o||e)(t.LFG(f),t.LFG(B.i))},e.\u0275prov=t.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();const H=[{path:"",component:C,resolve:{imoveis:x}},{path:"",component:C,resolve:{imoveis:x}},{path:":imovelid",component:D}];let X=(()=>{class e{}return e.\u0275fac=function(o){return new(o||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({imports:[m.Bz.forChild(H),m.Bz]}),e})(),j=(()=>{class e{}return e.\u0275fac=function(o){return new(o||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({imports:[a.ez]}),e})();var K=r(4117);let W=(()=>{class e{}return e.\u0275fac=function(o){return new(o||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({imports:[a.ez,X,j,K.m]}),e})()}}]);